{% extends "base.html" %}

{% block title %}Activity{% endblock %}

{% block content %}

    <h1>{{ object.title }}</h1>
    <h2>{{ object.description }}</h2>
    <h3>{{ object.date_time }}</h3>
    <h3>Participants</h3>
    <ul>
    {% for participant in object.users.all %}
        <li>{{ participant.username }}</li>
    {% endfor %}
    </ul>
    <h3>Tags</h3>
    <ul>
    {% for tag in object.tags.all %}
        <li>{{ tag.name }}</li>
    {% endfor %}
    </ul>

    <div id="map-canvas" style="width:100%;height:300px;"></div>

    {% include "utils/google_maps.html" %}
    <script>
        function initialize() {
            var map = new google.maps.Map(document.getElementById('map-canvas'));
            var bounds = new google.maps.LatLngBounds();
            function addMarker(lat, lng, title, lab) {
                var position = new google.maps.LatLng(lat, lng);
                var marker = new google.maps.Marker({
                  position: position,
                  map: map,
                  clickable: true,
                  title: title,
                  label: lab
                });
                bounds.extend(position);
            }
            addMarker({{ object.position.latitude}}, {{ object.position.longitude}}, "{{ object.title }}");
            map.fitBounds(bounds);
        }
        google.maps.event.addDomListener(window, 'load', initialize);
    </script>

    {% load disqus_tags %}
    {% disqus_show_comments %}

{% endblock %}